<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>登录</title>
    <link th:href="@{css/bootstrap.css}" rel="stylesheet">
    <link th:href="@{css/iupc.css}" rel="stylesheet">
    <link th:href="@{css/bootstrap-theme.css}" rel="stylesheet">
    <link th:href="@{css/bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{css/semantic.css}" rel="stylesheet">
    <link th:href="@{css/sunhuadi.css}" rel="stylesheet">
    <script type="text/javascript" th:src="@{js/bootstrap.min.js}" ></script>
    <script type="text/javascript" th:src="@{js/npm.js}" ></script>
    <script type="text/javascript" th:src="@{js/pic_box.js}" ></script>
    <script type="text/javascript" th:src="@{js/xmagic.js}" ></script>
    <script type="text/javascript" th:src="@{js/vue.js}" ></script>
    <!--<script src="code.jquery.com/jquery-3.4.1.min.js"> </script>-->
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" th:src="@{js/semantic.js}" ></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
</head>
<body>
<div class="register_box" id="register">
    <div class="username">
        <span style="font-size: 25px">请设置用户名</span>
        <input class="name" type="text" placeholder="" v-model="username" >
        <!--<input type="text" name="name">-->
        <br>
    </div>
    <br>
    <div class="username">
        <span style="font-size: 25px">请设置昵称</span>
        <input class="name" type="text" placeholder="" v-model="name" >
        <!--<input type="text" name="name">-->
        <br>
    </div>
    <div class="passw1">
        <span style="font-size: 25px">请设置密码</span>
        <input type="password" class="password1" v-model="password">
        <br>
    </div>
    <div class="passw2">
        <span style="font-size: 25px">请确认密码</span>
        <input type="password" class="password2"  v-model="repassword">
        <br>
    </div>
    <div class="upimg">
        <p class="upfile" >
            <label class="uplabel">上传头像</label>
            <input type="file"  id="picuper" class="upinput" @change="changepic()" accept="image/jpg" >
        </p>
        <div class="previewer1">
            <img id="pv_pic" class="previewed_pics"  src="image/0.jpg" />
            <p style="text-align: center  ">封面预览</p>
        </div>
</div>
    <div>
        <button style="background-color: #FDEDED; height:50px;width:80px;margin-top:6px; display: inline-block" class="regibutton" @click="zhuce">注册</button>
    </div>
    <div class="return">
        <img style="width: 90px;height: 78px" src="image/返回.png" >
        <span style="font-size: 20px;color: #557496">返回</span>
    </div>
</div>
<script>
    var register=new Vue({
        el:"#register",
        data:{
            user:{
                username:"",
                password: "",
                name:"",
            },
            repassword:"",
            //role:"",
            //user:null,
            // msg:sessionStorage.getItem("msg"),
        }, methods:{
            zhuce:function () {
                console.log("正在发送请求.....")
                console.log(this.userid)
                console.log(this.role)
                that=this;
                axios.post('/zhuce',{
                    username:that.userid,
                    password: that.userpassword,
                })
                    .then(function (response) {//是返回的所有信息
                        //response.length
                        console.log(response.data)
                        if (response.data.code=="0")
                        {
                            alert(response.data.msg)
                            console.log(response.data.code)
                            that.msg=response.data.msg
                            console.log(response.data.role)
                            console.log(response.data.username)
                            console.log(response.data.img)
                            //console.log(response.data.role)
                            // sessionStorage.setItem("msg","");
                            window.location.href="/login";
                        }
                        else {
                            that.msg=response.data.msg
                            alert(response.data.msg);
                            //sessionStorage.setItem("msg",response.data.msg);
                            window.location.href="/login";
                        }
                    })
                    .catch(function (error) {
                        console.log(error);
                    });

            }
        }

    })

</script>
</body>

<style>
    .register_box{
        width: 100%;
        height: 100%;
        background:#E3EFF9;
    }
    .username{
        position: relative;
        top:200px;
        left: 42%;
    }
    .passw1{
        position: relative;
        top:220px;
        left: 42%;
    }
    .passw2{
        position: relative;
        top:240px;
        left: 42%;
    }
    .upimg{
        position: relative;
        top:260px;
        left: 35%;
    }
    .usertype{
        position: relative;
        top:260px;
        left: 42%;
    }
    .regibutton{
        position: relative;
        left:48%;
        top:310px;
        border-radius: 4px;
        border: 2px solid #FAE3EA;
    }
    .name{
        border-radius: 4px;
        border: 1px solid #9CB5D3;
        width: 200px;
        height: 30px;
    }
    .password1{
        border-radius: 4px;
        border: 1px solid #9CB5D3;
        width: 200px;
        height: 30px;
    }
    .password2{
        border-radius: 4px;
        border: 1px solid #9CB5D3;
        width: 200px;
        height: 30px;
    }
    .return{
        position: absolute;
        top:1px;
        left: 1px;
    }
     .up_part{
         position: relative;
         left:5%;
         min-height:150px;
         width: 70%;
     }
    .upp{
        position: relative;
        margin:0;
        margin-top:20px;
        height:40px;
        left:10%;
        display: inline-block;
    }
    .uplabel{
        width: 120px;
        font-size:22px;
    }
    .upinput{
        height:40px;
        font-size: 18px;
        width:250px;
        border-radius: 10px;
        font-family: "微软雅黑 Light";
        font-weight: bolder;
    }
    .upinput:focus{
        background: #fff4d2;

    }
    .upfile{
        position: relative;
        margin:0;
        margin-top:20px;
        height:80px;
        left:10%;
    }
    .previewed_pics{
        position: relative;
        height: 150px;
        width: 150px;
        margin:10px;
    }
    .previewed_pics:hover{
        border: #ffcbe7;
        border-style: inset;
        border-width: 4px;
    }
    .previewer1{
        height:180px;
        right:20%;
        top:-10%;
        font-size: 20px;
        position: absolute;
        width: 150px;
        margin: 0;
    }
    .previewers{
        height:480px;
        left:10%;
        font-size: 20px;
        position: relative;
        width: 480px;
        margin: 0;
        overflow: auto;

    }
    .xbutton{
        position: relative;
        left:15%;
        height:50px;
        width: 75px;
        font-size: 18px;
        border-radius: 5px;
        border: outset #82b6ff;
    }
    .xbutton:hover{
        background: #fff8ed;
        color: #4f5666;
        font-size:20px;
    }
    .up_textarea{
        position:relative;
        left:10%;
        width:600px;
        height:400px;
        border: none;
    }
    .news_textarea{
        width:800px;
        height:350px;
        font-size:20px;
        text-indent: 2em;
    }

</style>
</html>