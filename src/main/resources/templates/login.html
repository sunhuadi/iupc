<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>登录</title>
    <link th:href="@{css/bootstrap.css}" rel="stylesheet">
    <link th:href="@{css/iupc.css}" rel="stylesheet">
    <link th:href="@{css/bootstrap-theme.css}" rel="stylesheet">
    <link th:href="@{css/bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{css/semantic.css}" rel="stylesheet">
    <link th:href="@{css/sunhuadi.css}" rel="stylesheet">
    <script type="text/javascript" th:src="@{js/bootstrap.min.js}" ></script>
    <script type="text/javascript" th:src="@{js/npm.js}" ></script>
    <script type="text/javascript" th:src="@{js/pic_box.js}" ></script>
    <script type="text/javascript" th:src="@{js/xmagic.js}" ></script>
    <script type="text/javascript" th:src="@{js/vue.js}" ></script>
    <!--<script src="code.jquery.com/jquery-3.4.1.min.js"> </script>-->
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" th:src="@{js/semantic.js}" ></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body class="background">
<div class="header" th:fragment="header">
    <div id="header_message">
        <div class="column">
            <img src="/image/hdj.png"  style="height: 60px;height:60px;" class="img-rounded">
        </div>
    </div>
    <div id="header_biaoti">
        <img style="height:78px;width:300px;" src="image/三坑圈.png" />
    </div>
    <div id="header_search" class="ui search">
        <div style="height: 60px;width: 800px;" class="ui icon input">
            <input class="prompt" type="text" placeholder="" v-model="svalue" @Blur="unshowit" @focus="doshowit" @keyup.enter="saveit" >
            <button style="background-color: #FDEDED; height:50px;width:80px;margin-top:6px; display: inline-block" class="ui button" @click="saveit">搜索</button>
        </div>
    </div>
    <div id="header_setting">
        <img style="height:60px;width:60px;" src="image/setting.png" />
    </div>

    <div id="header_txbox">
        <img src="image/tx.ico" id="header_tx">
        <div style="top:25px;left:85px;position: absolute;"></div>
    </div>

</div>
<div class="login_out" id="login_vue">
<div class="ui placeholder segment">
    <div class="ui two column very relaxed stackable grid">
        <div class="middle aligned column">
            <div class="ui big button">
                <i class="signup icon"></i>
                Sign Up
            </div>
        </div>
        <div class="column">
            <div class="ui form">
                <div class="field">
                    <label>Username</label>
                    <div class="ui left icon input">

                        <input type="text" placeholder="Username" v-model="userid" >
                        <i class="user icon"></i>
                    </div>
                </div>
                <div class="field">
                    <label>Password</label>
                    <div class="ui left icon input">
                        <input type="password" placeholder="Password" v-model="userpassword" @keyup.enter="denglu">
                        <i class="lock icon"></i>
                    </div>
                </div>
                <div class="ui blue submit button" @click="denglu">Login</div>
            </div>
        </div>
    </div>
    <div class="ui vertical divider">
        Or
    </div>
</div>
</div>

</body>
<script>
    var login=new Vue({
        el:"#login_vue",
        data:{
            userid:null,
            userpassword: null,
           // msg:sessionStorage.getItem("msg"),
        }, methods:{
            denglu:function () {
                console.log("正在发送请求.....")
                console.log(this.userid)
                that=this;
                axios.post('/logins',{
                    userid:that.userid,
                    userpassword: that.userpassword
                })
                    .then(function (response) {//是返回的所有信息

                        //response.length
                        console.log(response.data)
                        if (response.data.code=="0")
                        {
                            console.log(response.data.code)
                           // sessionStorage.setItem("msg","");
                            window.location.href="/";
                        }
                        else {

                            that.msg=response.data.msg
                            alert(response.data.msg);
                            //sessionStorage.setItem("msg",response.data.msg);
                            window.location.href="/login";

                        }
                    })
                    .catch(function (error) {
                        console.log(error);
                    });

            }
        }

    })

</script>
</html>